Version 4
SHEET 1 880 680
WIRE -144 -176 -368 -176
WIRE 128 -176 -144 -176
WIRE 592 -176 128 -176
WIRE 384 -128 320 -128
WIRE 480 -128 384 -128
WIRE 128 -112 128 -176
WIRE -144 -64 -144 -176
WIRE -368 -32 -368 -176
WIRE 320 -32 320 -128
WIRE 384 -32 384 -128
WIRE 320 96 320 32
WIRE 320 96 208 96
WIRE 384 96 384 48
WIRE 384 96 320 96
WIRE -144 144 -144 16
WIRE -96 144 -144 144
WIRE 128 144 128 -32
WIRE 128 144 96 144
WIRE 144 144 128 144
WIRE -368 192 -368 48
WIRE -368 192 -528 192
WIRE 480 192 480 -128
WIRE 592 192 592 -176
WIRE -528 240 -528 192
WIRE -368 240 -368 192
WIRE -96 240 -368 240
WIRE 208 240 208 192
WIRE 208 240 96 240
WIRE 304 240 208 240
WIRE -528 368 -528 320
WIRE 304 368 304 240
WIRE 304 368 -528 368
WIRE 352 368 304 368
WIRE 480 368 480 272
WIRE 480 368 432 368
WIRE 512 368 480 368
WIRE 592 368 592 272
WIRE 592 368 512 368
WIRE 512 400 512 368
FLAG 512 400 0
SYMBOL Optos\\PC817A 0 192 R0
SYMATTR InstName U1
SYMBOL ind 368 -48 R0
SYMATTR InstName L1
SYMATTR Value 2
SYMATTR SpiceLine Rser=600
SYMBOL res -384 -48 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL voltage 480 176 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR InstName V1
SYMATTR Value 12
SYMATTR SpiceLine Rser=1
SYMBOL voltage 592 176 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR InstName V2
SYMATTR Value 3.3
SYMATTR SpiceLine Rser=1
SYMBOL voltage -528 224 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR InstName V3
SYMATTR Value PULSE(3.3 0 0 0.0001 0.0001 1 2 4)
SYMATTR SpiceLine Rser=100
SYMBOL diode 336 32 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL res -128 32 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL npn 144 96 R0
SYMATTR InstName Q1
SYMATTR Value 2N3391A
SYMBOL res 112 -128 R0
SYMATTR InstName R3
SYMATTR Value 470
SYMBOL res 448 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1
TEXT -562 408 Left 2 !.tran 0 5 0
